#!/bin/sh

if ! command -v docker &> /dev/null
then
  echo "Please install docker"
  exit 1
fi

echo "##################################"
echo "# Starting to build docker image #"
echo "##################################"
echo ""
docker build -t badgepad-latest .
echo ""
echo "######################"
echo "# Docker image built #"
echo "#####################"
echo ""

echo "################################"
echo "# Starting to compile firmware #"
echo "################################"
echo ""
docker run -ti --rm -v $(pwd)/output:/build badgepad-latest
echo ""
echo "#############################################################"
echo "# Firmware compiled. Use QMKToolbox or dfu-util to flash it #"
echo "#############################################################"
